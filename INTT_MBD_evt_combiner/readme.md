# The offline event combiner for INTT and MBD for the sPHENIX run 23 data
Updated: 2024-Mar-06

* The code reads the root trees of INTT and MBD generated by the F4A, does the synchronization check, merges the branches of the two trees, and outputs a root file with a merged tree and two histograms showing the synchronization status.
* It is aimed to be an inclusive code, which means that you don't have to define the names and types of the branches explicitly.
* Only the clock information related braches are needed.
  1. One in INTT tree, the branch "INTT_BCO", which keeps the bco_full information (40-bit GTM clock).
  2. One in MBD tree, the branch "mbdclk", which keeps the FEM clock information.
* These two branches are used for the event synchronization. If you happened to use the event combiner with trees with different structures, you may want to make sure the names of the clock-info. branches consistent with the names mentioned above.

The python code requires at least 5 arguments
1. <outfile_full_directory>
2. <intt_file_full_directory>
3. <intt_tree_name>
4. <mbd_file_in_full_directory>
5. <mbd_tree_name>
6. <N_event>: this is optional, if it's not given, then all events of the file will be included

## To run the code: 
```bash
python3 intt_mbd_evt_combiner_v1.py outfile_full_directory intt_file_full_directory intt_tree_name mbd_file_in_full_directory mbd_tree_name N_event
```


* Histogram (intt_mbd_bco and intt_mbd_bco_1D) kept in the output root file can be checked once the process is done.
  * The plot "intt_mbd_bco" shows the clock difference as a function of event ID. If the synchronization is performed correctly, it is expected to be a horizental line across events. Like the example given in the folder.
